# Масштабирование системы
## Балансировка нагрузки
**Балансировка нагрузки** - распределение заданий между несколькими сетевыми устройствами с целью **оптимизации** использования ресурсов, **сокращения** времени обслуживания, а также предотвращение **перегрузки** какой-либо из частей системы

**Балансировщик нагрузки (load balancer)** - компонент системы, который перераспределяет передаваемый трафик между разными приложениями, сервисами и хранилищами. Балансировщик также может следить за статусом сервисов, в которые он передает запросы, чтобы перестать передавать запросы к серверам, переставшим отвечать в течение заданного времени.

**Принцип работы балансировщика нагрузки**:
- Анализ того какие сервисы готовы принять и обработать запрос пользователей
- Выбор наиболее подходящего сервиса по заданному алгоритму

**Алгоритмы выбора наиболее подходящего сервера**
- По **количеству соединений** - приоритет серверу с минимальным количеством подключений
- По **времени ответа** - приориет серверу с наименьшей задержкой перед ответом
- По **трафику** - приоритет серверу с минимальной сетевой нагрузкой
- **Round-robin** - на каждый запрос меняем сервер по кругу из заранее определенной очереди
- **Weighted round-robin** - серверы получают веса на основании характеристик выше
- **Пользовательский хеш** - выбираем сервер на основании хеша(IP, user_id, ...)
  
**Преимущества использования балансировщика**
- Улучшается пользовательский опыт за счёт передачи запроса подходящему серверу;
- Снижается нагрузка на каждый из серверов за счёт распределения запросов между ними;
- Справляемся с отказом части серверов, по крайней мере, в случае stateless сервиса;
- Умные балансировщики могут даже предсказывать рост нагрузки и инициировать автоскейлинг.