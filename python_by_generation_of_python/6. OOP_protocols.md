# Пртоколы

## Протокол итерируемых обектов и итераторов

Подробнее об этом в [Iterators_and_generators](./Iterators_and_generators.md)

## Протокол последовательностей

**Последовательности** — коллекции, элементы которых пронумерованы индексами и расположены в строгом порядке.

**Последовательностью** считается объект, поддерживающий следующие операции:

- индексация
- срезы
- проверка на принадлежность (оператор `in`)
- наличие длины (`len`)
- итерирование
Например: `list`, `str`, `tuple` и `range`

Для создания **собственной последовательности**, нам нужно создать класс **поддерживающий все вышеперечисленные операции**, путем добавления в него **соответсвующих магических методов**.

### Неизменяемая последовательность

Для создания неизменяемой последовательности нам нужно определить следующие методы:

- `__len__()` - определяет поведения при передаче объекта в функцию `len()`
- `__getitem__()` - определяет поведение объекта при обращениии к эллементу через `sekf[key]`
- `__iter__()` - возвращяет итератор и определяет поведение при передаче в функцию `iter()`
- `__contains__()` - определяет поведение при проверке на принадлежность с помощью `in` или `not in`

Пример реализации класса - неизменяемой последовательности:

```py
class PersonalToDoList:
    def __init__(self, to_do_list : list, person : str):
        self.to_do_list = list(to_do_list)
        self.person = person
    
    def __len__(self):
        return len(self.to_do_list)
    
    def __getitem__(self, index):
        if not isinstance(index, int):
            raise TypeError("The index must be int")
        if index < 0 or index > len(self.to_do_list):
            raise IndexError("Wrong index")
        else:
            return self.to_do_list[index]
    
    def __iter__(self):
        yeild from self.to_do_list
    
    def __contains__(self, item):
        return item in self.to_do_list
```

### Изменяемая последовательность

Для создания изменяемой последовательности к вышеописанным методам нужно добавить:

- `__setitem__()` - определяет поведение значение при присваивании значения элементу последовательности, `self[key] = value`
- `__delitem__()` - определяет поведение при удалении элемента последовательности, с помощью `del`

Рассмотрим добавлении методов в тот же класс:

```py
class PersonalToDoList:
    ...
    ...
    ...
    ...

    def __setitem__(self, key, value):
        self.to_do_list[key] = value
    
    def __delitem__(self, key):
        del self.to_do_list[key]
```

### Срезы последовательностей
