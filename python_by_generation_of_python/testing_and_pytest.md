# Testing

## Теория

### А для чего вообще нужно тестирование?

- **Тестирование помогает выявить проблемы на ранних стадиях**, когда их исправление требует меньше времени и ресурсов.
- **Уверенность при внесении изменений и рефакторинге**. При прохождении тестов вы будете уверены что не сломаете продукт в покрытых тестами зонах.
- **Хорошо написанные тесты служат формой живой, исполняемой документации.** Они наглядно демонстрируют, как должен использоваться ваш код и какое поведение от него ожидается
- Процесс написания тестов **часто заставляет задуматься о структуре и дизайне кода**. Т.к. не весь код удобно тестировать
- Предотвращение регрессий - это ошибки, которые появляются в уже работавшем коде, в который напрямую не вносяться изменения, но могут быть какие то зависимости.

### Типы тестов

- **Unit tests** - или модульные тесты. Модульные тесты проверяют самые маленькие, изолированные части вашей программы — отдельные функции, методы или классы. То-есть **помодульно**. Цель — убедиться, что каждый "кирпичик" вашего кода работает правильно сам по себе.
- **Integration Tests** - интеграционные тесты. Интеграционные тесты проверяют взаимодействие между несколькими модулями или компонентами системы. Например, как ваш модуль обработки заказов взаимодействует с модулем уведомлений или базой данных. **Например**: Проверка того, что после успешного создания пользователя в базе данных (один модуль), система аутентификации (другой модуль) может его распознать.
- **Functional / End-to-End, E2E Tests** - функциональные / сквозные тесты. Эти тесты проверяют всю систему или значительную ее часть с точки зрения пользователя. Они имитируют реальные пользовательские сценарии, проходя через все слои приложения — от пользовательского интерфейса (если он есть) до базы данных. **Пример**: Полный сценарий регистрации нового пользователя на сайте: заполнение формы, отправка данных, получение письма с подтверждением, первый вход в систему.

### Пирамида тестирования

Пирамида тестирования - это модель которая демонстриреут рекомендательное соотношение различных типов тестирования в проекте.  
![alt text](./pictures/testing_pyramid.png)

- Модульные тесты - составляют основу. Их должно быть больше всего так как они быстрые, дешевые и точно указывают на чать программы в которой находиться ошибка.
- Интеграционные тесты - проверяют взаимодействие компонетнтов. Дешевле чем e2e тесты, но дороже чем unit.
- E2e тесты - наиболее медленные, хрупкие и дорогие в поддержке.

### Принцип хорошего теста (FIRST)

- **F** (Fast) - **быстрые**. медленные тесты **замедляют** разработку и из-за этого их реже запускают
- **I** (Independent/Isolated) - независимые/изолированные. **Тесты не должны зависить друг от друга**. Порядок их выполнения не должен влиять на результат. При необходимости, каждый тест должен настраивать свое окружение и отчищать его.
- **R** (Repeatable) - повторяемые. Тесты должны выдавать один и тот же результат при каждом запуске в одной и той же среде. Не должно быть случайных сбоев или зависимости от внешних изменяемых факторов.
- **S** (Self-Validating) - само-проверяемые. Тест сам должен определить, прошел он или нет, без необходимости ручной проверки результатов.
- **T** (Timely/Thorough) - своевременные/тщательные. Тесты **нужно писать своевременно** (в идеале, до или вместе с кодом, который они тестируют – **TDD**). Они должны быть **достаточно тщательными**, чтобы покрывать важные аспекты тестируемого кода, включая граничные случаи.
