# Пространственное моделирование data warehouse
Витрина данных - это некий тематичесий (то есть под конкретные задачи бизнес анализа) срез их хранилища данных. Витрина данных позволяет определенной группе бизнес лиц принять решения на основе узконаправленной информации.
Взаимодействие с витриной данных происходит без использования **join**в, вся необходимая информация должна быть в витрине
## Модель "**звезда**"
**Придумал**: Ральф Кимбалл  
**Другие названия:** пространственная модель, модель измерений и фактов, модель "сущность-связь", dimentional model, star schema

Модель представляется двумя видами таблиц:
- Таблица **фактов** (facts) - это какие то события (продажи и т.п.), а также идентификаторы измерений 
- Таблица **измерений** (dimentions) - это описательные характеристики этих фактов (то есть **расширяют наше понимание** что это за событие) (какой регион продажи, какой месяц продажи (дата как правило есть) что за покупатель и т.п.)

![alt text](../picture/star_model.png)

Согласно Ральфу Кимбалу:
> "Может еще сущестовать измерение без фактов, но не может существовать факта без измерения"

## Модель **снежинка**
Схема снежинка (snowflake) - это добавление некой иерархии в таблицы измерений (то есть выделение более крупных категорий в измерениях (регион, период продаж и т.п.)). Можно сказать что это процесс нормализации таблиц измерений.
![alt text](../picture/snowflake_model.png)

## Сравнение звезды и снежинки
![alt text](../picture/star_vs_snowflake.png)

## Схема созвездие

![alt text](../picture/constellation.png)

## Таблица фактов
**Таблица фактов** - это основная таблица, которая содержит сведения об объектах событиях, процессах которые будут использоваться в дальнейшей аналитике.

Таблица фактов состоит из:
- Числовые метрики
- **Составного ключа**, состоящий из первичных ключей **таблиц измерений**. Первичный ключ **таблицы измерений** является внешним ключом в **таблице фактов**
  
Таблицы фактов бывают:
- **Аддитивные факты**(Additive facts) - это такие факты которые можно **суммировать по любым измерениям **для получения значимого результата. (Например объем продаж, можем смотреть по региону, клиенту, дате и т.д.)
- **Полуаддитивные факты** (Semiadditive facts) - это такие факты которые мы можем **суммировать только по каким то определенным измерениям** (мера, представляющая количество товаров на складе, может быть статистически вычислена вдоль измерения географии для получения суммарного количества товаров на всех складах, но эта мера не может быть статистически вычислена вдоль измерения времени, поскольку это будут одни и те же товары которые нет смысла суммировать)
- **Неадитивные факты** (Non-additive facts) - это такие факты которые **нет смысла суммировать ни по каким измерениям** (например комнатная температура)
- **Числовые меры интенсивности** (Numeric Measures of Intensity) - это такие факты которые являются неадитивными по времени, но при этом допускают агрегацию и суммирование по некторому числу временных периодов (возможно здесь имеется ввиду агрегации кроме суммирования, я не нашел прозрачных примеров)
06:48
