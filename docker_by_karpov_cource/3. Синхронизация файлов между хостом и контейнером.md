# Синхронизация файлов между хостом и контейнером

Для синхронизации файлов между хостом и контенером (или между контейнерами) сущестует три сущности:

![alt text](./pictures/file_areas.png)

## **Docker volumes**
**Docker volumes** - так называемые "тома" (это рекомендуемый способ хранения данных). **Docker volume** - это **каталог** на хост-системе, который монтируется в один или несколько контейнеров и **управляется Docker**.



`docker volume create <volume_name>` - создание тома в каталоге, указанном в конфигурации Docker. По умолчанию Docker использует каталог **/var/lib/docker/volumes**  
(в windows эта папка находиться в виртуальной файловой системе для wsl, а ее физическое расположение можно узнать из настроек docker desktop)  
`docker volume ls` - список томов  
`docker volume inspect <volume_name>` - описание тома 
`docker volume rm <volume_name>` - удаление тома
`docker volume prune` - удаление томов, которые не используются ни одним из контейнеров

`docker run -v <volume_name>:<mount_point> <image_name>` - создание контейнера с примонтированным томом.
**mount_point** - это путь папка внутри контейнера через которую обеспечивается связь с томом на хосте

## **Bind mounts**
**Bind mounts** - это механизм, который позволяет связать папку или файл на хост-компьютере с папкой или файлом внутри контейнера. Это позволяет одновременно работать с данными как на хосте, так и внутри контейнера, и все изменения будут отображаться в обеих местах. (в то время как **volumes** управляются только через docker)

`docker run -v <host_file_path>:<mount_point> <image_name>` - монтирование bind mounts внутрь контейнера 

`docker run -v <host_file_path>:<mount_point>:**ro** <image_name> - монтирование bind mounts внутрь контейнера с read_only режимом

Минусы использования bind mount:
- т.к. приложение в контейнере работае через суперюзера, приложение может удалить папку на хосте (а если это системная папка то системную папку). То есть **НЕ НУЖНО МОНТИРОВАТЬ КОРЕНЬ или папки в bind_mount**

## **tmpfs** (но его рассматривать не будем)



https://habr.com/ru/companies/slurm/articles/534334/


